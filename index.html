<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>For Soumya ğŸ’–</title>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
/* --- UI STYLES (unchanged visually) --- */
:root{
  --pink:#ff8fb1;
  --pink2:#ffd1dc;
  --bg1:#fff0f5;
  --bg2:#ffe4e1;
  --ink:#4b2c2c;
}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  background:linear-gradient(180deg,var(--bg1),var(--bg2));
  color:var(--ink);
}
.container{max-width:900px;margin:auto;padding:24px 14px 160px}
.card{
  background:#fff;
  border-radius:22px;
  padding:18px;
  box-shadow:0 10px 25px rgba(0,0,0,.08);
  margin:16px 0;
}
.hero{text-align:center}
h1,h2{margin:.4rem 0}
.mood-row{display:flex;gap:10px;flex-wrap:wrap}
.pill{
  border:none;cursor:pointer;
  padding:10px 14px;border-radius:999px;
  background:linear-gradient(180deg,var(--pink2),var(--pink));
  color:#fff;font-weight:700;
}
.reply{margin-top:10px;font-style:italic}
.bucket-input{display:flex;gap:10px}
.bucket-input input{
  flex:1;padding:12px;border-radius:12px;border:1px solid #ddd
}
.bucket-input button{
  padding:12px 14px;border-radius:12px;border:none;
  background:var(--pink);color:#fff;font-weight:700
}
ul{list-style:none;padding:0;margin-top:12px}
li{
  display:flex;justify-content:space-between;align-items:center;
  background:#fff6fa;border-radius:14px;padding:10px 12px;margin:8px 0
}
.done{text-decoration:line-through;opacity:.6}
footer{
  position:fixed;bottom:0;left:0;right:0;
  background:rgba(255,255,255,.85);
  text-align:center;padding:12px;font-size:13px
}
</style>
</head>

<body>

<div class="container">

  <div class="card hero">
    <h1>Hey Soumya ğŸ’•</h1>
    <div id="dailyMessage"></div>
  </div>

  <div class="card">
    <h2>How are you cutiee? ğŸ¥°</h2>
    <div class="mood-row">
      <button class="pill" data-mood="happy">Happy ğŸ˜Š</button>
      <button class="pill" data-mood="sad">Sad ğŸ¥º</button>
      <button class="pill" data-mood="tired">Tired ğŸ˜´</button>
      <button class="pill" data-mood="excited">Excited âœ¨</button>
    </div>
    <div class="reply" id="moodReply"></div>
  </div>

  <div class="card">
    <h2>Our Cute Bucket List ğŸ¾</h2>
    <div class="bucket-input">
      <input id="bucketInput" placeholder="Add something sweetâ€¦" />
      <button id="bucketAdd">Add</button>
    </div>
    <ul id="bucketList"></ul>
  </div>

</div>

<footer>Made with love ğŸ’—</footer>

<script>
/* =========================
   SUPABASE SETUP
========================= */
const SUPABASE_URL = "https://vzzwibveqcgyblyuaztv.supabase.co";
const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ6endpYnZlcWNneWJseXVhenR2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgzMTc3MDUsImV4cCI6MjA4Mzg5MzcwNX0.BVTm-pYfEJQ0XGgaEcFDHRUb4CSvJmsPon3UGAcqwPY";

const supabase = supabase.createClient(
  SUPABASE_URL,
  SUPABASE_ANON_KEY
);

/* =========================
   VISIT LOGGING
========================= */
(async () => {
  try {
    await supabase.from("events").insert({
      event_type: "visit",
      value: "page_open"
    });
  } catch(e){}
})();

/* =========================
   DAILY MESSAGE
========================= */
const messages = [
  "You make the world softer just by existing ğŸ’–",
  "If smiles were stars, youâ€™d be a galaxy âœ¨",
  "You are deeply cherished ğŸ’",
  "A cat somewhere is purring for you ğŸ¾"
];
const today = new Date().toDateString();
let daily = JSON.parse(localStorage.getItem("dailyMsg")||"{}");
if(daily.date!==today){
  daily={date:today,text:messages[Math.floor(Math.random()*messages.length)]};
  localStorage.setItem("dailyMsg",JSON.stringify(daily));
}
document.getElementById("dailyMessage").textContent = daily.text;

/* =========================
   MOODS (LOGGED)
========================= */
const moodReply = {
  happy:"That smile is adorable ğŸ’«",
  sad:"Soft hugs for you ğŸ¤",
  tired:"Rest a little, sweetheart ğŸŒ™",
  excited:"Your joy is glowing âœ¨"
};

document.querySelectorAll(".pill").forEach(btn=>{
  btn.onclick = async () => {
    const mood = btn.dataset.mood;
    document.getElementById("moodReply").textContent = moodReply[mood];

    try {
      await supabase.from("events").insert({
        event_type:"mood",
        value:mood
      });
    } catch(e){}
  };
});

/* =========================
   BUCKET LIST (SYNCED)
========================= */
const bucketList = document.getElementById("bucketList");
const bucketInput = document.getElementById("bucketInput");

function renderBucket(id,text,done){
  const li=document.createElement("li");
  if(done)li.classList.add("done");
  li.innerHTML=`
    <span>${text}</span>
    <div>
      <button>âœ”</button>
      <button>âœ–</button>
    </div>
  `;
  li.children[1].children[0].onclick=async()=>{
    li.classList.toggle("done");
    await supabase.from("bucket_items")
      .update({done:li.classList.contains("done")})
      .eq("id",id);
  };
  li.children[1].children[1].onclick=async()=>{
    li.remove();
    await supabase.from("bucket_items").delete().eq("id",id);
  };
  bucketList.appendChild(li);
}

async function loadBuckets(){
  const {data}=await supabase.from("bucket_items").select("*").order("created_at");
  data?.forEach(b=>renderBucket(b.id,b.text,b.done));
}
loadBuckets();

document.getElementById("bucketAdd").onclick=async()=>{
  const text=bucketInput.value.trim();
  if(!text)return;
  bucketInput.value="";
  const {data}=await supabase
    .from("bucket_items")
    .insert({text,done:false})
    .select()
    .single();
  renderBucket(data.id,data.text,data.done);
};

/* =========================
   NOTE FOR YOU
========================= */
/*
You can now see EVERYTHING Soumya does in Supabase:

- Table: events
  - visit
  - mood
- Table: bucket_items
  - text
  - done

This is real backend data.
*/
</script>

</body>
</html>
